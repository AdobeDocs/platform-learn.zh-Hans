---
title: 迁移其他页面规则
description: 了解如何将其他基于页面的规则迁移到Web SDK扩展。
solution: Data Collection, Analytics
feature: Web SDK
jira: KT-16764
source-git-commit: 7ae56d997884cf1558e72c0ad553df1c5d43c081
workflow-type: tm+mt
source-wordcount: '736'
ht-degree: 0%

---


# 迁移其他页面规则

在本练习中，您将了解如何将其他基于页面的规则迁移到Web SDK扩展。 您会发现这与将默认页面加载规则迁移到Web SDK时执行的练习类似。 这些方法仍然适用。 最大的区别是，使用这些规则，您不会添加“发送事件”操作，因为大多数情况下，您的规则不包含Analytics扩展的Send Beacon操作。

## 概述

让我们做些备份，然后讨论Analytics实施与Adobe Analytics标记扩展的关系(也称为“AppMeasurement”实施，因为这是JavaScript文件的名称)。

我不会假设您确切了解自己的实施方式，但在许多使用Experience Platform标记（以前称为“Launch”）的实施中，许多规则会根据页面或URL中的内容有条件地触发。 例如：

* 搜索结果规则，仅在执行内部搜索且出现搜索结果页面时触发
* 营销活动登陆页面规则，仅在URL中存在跟踪代码时触发
* 页面类型规则，仅对属于特定类型页面（如产品详细信息页面、购物车页面等）的页面触发。
* 有条件触发的任何其他页面

这里的关键点是，所有这些用例仅在页面上触发&#x200B;**（有时）**，我们&#x200B;**也**&#x200B;期望默认页面规则触发。 因此，我们不希望在这些规则中包含发送信标（AA扩展）或发送事件(Web SDK扩展)，否则将会导致同一页面加载传入两个点击。

因此，这些规则会构建对象，但不会将数据发送到中。 我们只需确保这些规则在&#x200B;**默认页面加载规则之前**&#x200B;触发，以便在它们构建对象后，默认页面加载规则上的“发送信标/发送事件”操作会发送其中的所有内容。 现在，您可能已经了解了所有这些信息，这就是您网站的设置方式。 但是，如果您不熟悉自己的实施，或者如果您需要“修复”实施以类似于此方法，则此练习对您特别有用。

## 条件规则的迁移示例

以下是迁移有条件触发的规则的示例。 我将用以上促销活动登陆页面的示例。 正如上文所述，这与我们在默认页面规则中已使用的模式相同，不同之处在于，该模式会更加简单，因为我们仅设置变量，不会触发任何点击。

1. 找到条件规则。 在本例中，我们找到并选择了促销活动跟踪代码规则。

   ![促销活动跟踪代码规则选择](assets/campaign-tracking-code-rule-select.jpg)

1. 当规则打开时，我们可以看到此规则基于查询字符串参数触发时存在条件。 我们不需要更改任何有关条件的任何内容，因为我们只想更新/迁移操作，而不想更改事件或条件。
1. 单击&#x200B;**Adobe Analytics — 设置变量**&#x200B;操作
1. 记下操作中设置的任何内容。 在此示例中，我们注意到已设置&#x200B;**event101**&#x200B;以及&#x200B;**Campaign**&#x200B;变量。

   ![event101](assets/event101.jpg)
   ![营销活动变量](assets/campaign-variable.jpg)

1. 我们仅在此点击以生成注释，因此无需更改任何内容，现在只需单击&#x200B;**取消**&#x200B;即可。
1. 通过单击“操作”部分中的&#x200B;**加号图标**&#x200B;创建新操作

   ![新操作](assets/new-action-conditional-rule.jpg)

1. 配置新规则
   1. 从“扩展”下拉列表中选择&#x200B;**Adobe Experience Platform Web SDK**。
   1. 从“操作类型”下拉列表中选择&#x200B;**更新变量**。
   1. 在右侧面板中，选择数据对象中的&#x200B;**Analytics**&#x200B;对象

      ![更新变量操作](assets/configure-conditional-rule-action.jpg)

1. 现在，将event101和促销活动变量设置为与现有操作中设置的值相同的值。

   ![设置event101](assets/web-sdk-event101.jpg)
   ![设置营销活动](assets/web-sdk-campaign-var.jpg)

1. 现在您可以&#x200B;**保留更改**&#x200B;和&#x200B;**保存到库**，并且您的规则已迁移到Web SDK。

>[!IMPORTANT]
>
>与默认页面加载规则一样，我们在规则中保留了Analytics扩展的&#x200B;**设置变量**&#x200B;操作，以便在验证迁移时我们可以比较数据。 在执行最终清理时，不要忘记稍后返回并删除Analytics扩展的操作。



